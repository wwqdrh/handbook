TODO: how to discover the connection is closed


